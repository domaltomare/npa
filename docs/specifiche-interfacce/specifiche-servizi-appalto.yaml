openapi: 3.0.3
info:
  title: Specifiche Servizi Appalto - OpenAPI 3.0
  x-summary: >-
    Specifiche dei servizi esposti dalla Nuova Piattaforma Appalti (NPA), richiamabili dalle Stazioni Appaltanti, per la gestione e la raccolta delle informazioni rilevanti nei processi che compongono l’intero ciclo di vita degli appalti
  description: |-
    Sono descritte le specifiche dei servizi esposti dalla Nuova Piattaforma Appalti (NPA), richiamabili dalle Stazioni Appaltanti, per la gestione e la raccolta delle informazioni rilevanti nei processi che compongono l’intero ciclo di vita degli appalti.

      #### Documentazione
      La documentazione a supporto delle specifiche di interfaccia con i sistemi che interoperano con il nuovo sistema di digitalizzazione è redatta con il linguaggio di markup Markdown ed è presente al segunete url:
        [documento-specifiche-servizi-npa](https://github.com/domaltomare/npa/blob/main/docs/specifiche-interfacce/documento-specifiche-servizi-npa.md)
    ```
  # I termini del servizio.
  termsOfService: 'https://github.com/domaltomare/npa/blob/main/README.md#termini-del-servizio'
  # Chi posso contattare per informazioni sul servizio e sul suo stato?
  contact:
    email: ufficio.uscp@anticorruzione.it
    name: ANAC - Ufficio Servizi IT Contratti Pubblici
    url: https://www.anticorruzione.it
  # L'audience delle API. Attualmente e' definito solamente
  #   la tipologia `public`.
  x-audience:
    - public
  # Ogni API deve avere un UUID, invariante nel tempo e
  #   rispetto al `title`.
  x-api-id: 00000000-0000-0000-0000-000000000000
  license:
    name: Licenza Pubblica dell'Unione Europea v. 1.2
    url: 'https://eupl.eu/1.2/it/'
  # Per dare indicazioni sul ciclo di vita dell'API
  # si puo' usare un parametro come:
  x-lifecycle:
    published: 2023-03-31
    maturity: published  
  version: 1.0.0
servers:
  - url: https://repositorydocument.swagger.io/api/v1
    description: Development server
tags:
  - name: gestioneUtenti 
    description: Nel seguente contesto sono inclusi i servizi utilizzabili dalla SA per effettuare la gestione degli incaricati, la delega e la presa in carico di determinate operazioni.
  - name: pianificazioneAppalto
    description: Nel seguente contesto sono inclusi i servizi utilizzabili dalla SA utili alla gestione della prima fase di pianificazione e programmazione mediante la creazione e la conferma dell’Avviso di Preinformazione.
  - name: comunicaAppalto
    description: In questa fase del processo avviene la creazione dell’appalto, la formalizzazione dei fabbisogni della SA e, al termine di tutte le verifiche necessarie, l’emissione del CIG per i singoli lotti dell'appalto. I servizi di seguito descritti potranno essere pertanto richiamati dalle SA fino all’assegnazione dei CIG.
  - name: pubblicaAvviso 
    description: In questa fase del processo avviene la pubblicazione, a livello europeo e/o nazionale, degli avvisi relativi all’Appalto o ad una delle schede successive che prevedono la pubblicazione.
  - name: comunicaPostPubblicazione
    description: In questo contesto rientrano tutti i servizi richiamabili dalla SA finalizzati alla gestione delle fasi del ciclo di vita dell’Appalto successive alla pubblicazione di un bando di gara. I servizi permetteranno la creazione, l’invio e il recupero delle schede contenenti i dati necessari al monitoraggio delle fasi di aggiudicazione ed esecuzione di un appalto.
  - name: serviziComuni
    description: In questo contesto si riportano i servizi comuni, ossia quelli che possono essere richiamati dalle Stazioni appaltanti in più contesti dell’NPA.
  - name: serviziTecnici 
    description: Operazioni richiesti dalle linee guida sull'interoperabilità
paths:
  /status:
    get:
      summary: Ritorna lo stato dell'applicazione. SINCRONO
      description: |
        Ritorna lo stato dell'applicazione. A scopo
        di test, su base randomica puo' ritornare
        un errore.
      operationId: idStatusShow
      tags:
        - serviziTecnici
      responses:
        '200':
            description: |
              Il server ha ritornato lo status. In caso di problemi
              ritorna sempre un problem+json.
            headers: &ratelimit_headers 
              X-RateLimit-Limit:
                 $ref: '#/components/headers/X-RateLimit-Limit'
              X-RateLimit-Remaining:
                 $ref: '#/components/headers/X-RateLimit-Remaining'
              X-RateLimit-Reset:
                 $ref: '#/components/headers/X-RateLimit-Reset'
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/BaseResponse'
        '429':
            description: Limite di richieste raggiunto
            headers:
              Retry-After:
                $ref: '#/components/headers/Retry-After'
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/BaseResponse'        
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/BaseResponse'          
  /crea-piano:
    post:
      tags:
         - pianificazioneAppalto
      summary: API Rest per la creazione della Pianificazione. SINCRONO 
      description: Inserimento della Pianificazione nel formato definito da Anac e Inserimento dell'eventuale avviso di pre-informazione in TED nel formato eForm. SINCRONO 
      operationId: idPianoCrea
      requestBody:
        description: Inserimento piano con tutti i dati aggiuntivi
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreaPianoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Viene restituito l'idPiano generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreaPianoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /modifica-piano:
    post:
      tags:
         - pianificazioneAppalto
      summary: API Rest per la modifica della Pianificazione. SINCRONO 
      description: Sostituisce la precedentemente Pianificazione inviata. SINCRONO 
      operationId: idPianoModifica
      requestBody:
        description: Oggetto generico in ingresso al servizio
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatiPianoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModificaPianoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'  
      security:
        - apiKeyAuth: []
  /cancella-piano:
    post:
      tags:
        - pianificazioneAppalto
      summary: API Rest per l'eliminazione di una Pianificazione in lavorazione. SINCRONO
      description: Eliminazione della Pianificazione in lavorazione. SINCRONO
      operationId: idPianoCancella
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idPianificazione:
                  description: identificativo univoco della Pianificazione definito da ANAC. (A UUID specified by RFC4122)
                  type: string
                  format: uuid
                  example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
                motivo:  
                  description: descrizione del motivo della richiesta di cancellazione
                  type: string
                  maxLength: 200
                  example: 'Pianificazione non approvata'
              required:
                - idPianificazione
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CancellaPianoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /consulta-piano:
    get:
      tags:
        - pianificazioneAppalto
      summary: API Rest per il recupero del dettaglio della Pianificazione. SINCRONO
      description: API Rest per il recupero del dettaglio della Pianificazione. SINCRONO
      operationId: idPianoDettaglio
      parameters:
        - in: query
          name: idPianificazione
          description: identificativo univoco della Pianificazione definito da ANAC. (A UUID specified by RFC4122)
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsultaPianoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /ricerca-piano:
    get:
      tags:
        -  pianificazioneAppalto
      summary: API Rest per la ricerca delle Pianificazioni. SINCRONO
      description: Viene recuperata la lista con i dati di sintesi delle Pianificazioni.Le informazioni restituite dal servizio saranno filtrate, oltre in base ai parametri di ricerca, anche in base alla competenza della SA che sta operando SINCRONO
      operationId: idPianoRicerca
      parameters:
        - in: query
          name: stato
          description: stato della Pianificazione - - fare riferimento ai valori contenuti nel file [statoPiano.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/statoPiano.json)
          schema:
            $ref: '#/components/schemas/StatoPianoEnum'
        - in: query
          name: tipo
          description: tipologia della Pianificazione - fare riferimento ai valori contenuti nel file [tipoPiano.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/tipoPiano.json)
          schema:
            $ref: '#/components/schemas/TipoPianoEnum'    
        - in: query
          name: dataCreazioneDa
          description: Data di crezione della Pianificazione - intervallo successivo (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'
        - in: query
          name: dataCreazioneA
          description: Data di crezione della Pianificazione - intervallo precedente (A datetime specified by ISO 8601 as profiled by RFC 3339) 
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'  
        - in: query
          name: page
          description: numero della pagina da visualizzare
          schema:
            type: integer
            format: int32
            default: 1
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32
            default: 20
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PianoListaResponse'          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /verifica-piano:
    post:
      tags:
        - pianificazioneAppalto
      summary: API Rest per la validazione della Pianificazione. ASINCRONO - ASIMMETRICO
      description: L'ultima istanza della Pianificazione inviata viene validata. In base alla tipologia della Pianificazione viene eseguita una validazione sintattica dei dati di input. ASINCRONO - ASIMMETRICO
      operationId: idPianoVerifica
      parameters:
        - in: query
          name: idPianificazione
          description: identificativo univoco della Pianificazione definito da ANAC. (A UUID specified by RFC4122)
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
            $ref: '#/components/responses/200AckResponse'       
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /conferma-piano:
    post:
      tags:
        - pianificazioneAppalto
      summary: API Rest per la conferma dei dati inviati per una specifica Pianificazione. ASINCRONO - ASIMMETRICO
      description: Il servizio consente di confermare i dati inviati per una specifica Pianificazione. Qualora il tipo di piano lo consente, il servizio restituisce l'identificativo dell'avviso ad esso assegnato che la SA potrà utilizzare per la successiva invocazione di pubblica-avviso. ASINCRONO - ASIMMETRICO
      operationId: idPianoConferma
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idPianificazione:
                  description: identificativo univoco della Pianificazione definito da ANAC. (A UUID specified by RFC4122)
                  type: string
                  format: uuid
                  example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
              required:
                - idPianificazione
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Se previsto viene restituito l'idAvviso generato da ANAC.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfermaPianoResponse'
          links:
            StatoAvvisoIdLink:  
              operationId: idAvvisoStato
              parameters:
                idAvviso: '$response.body#/idAvviso'
              description: >
                Il valore di `idAvviso` restituito nella riposta può essere usato per richiamare `GET /stato-avviso`.  
            PubblicaAvvisoIdLink:  
              operationId: idAvvisoPubblica
              parameters:
                idAvviso: '$response.body#/idAvviso'
              description: >
                Il valore di `idAvviso` restituito nella riposta può essere usato per richiamare `GET /pubblica-avviso`.         
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /crea-appalto:
    post:
      tags:
         - comunicaAppalto
      summary: API Rest per la creazione di un Appalto. SINCRONO 
      description: Il servizio permette l'inserimento della prima istanza in lavorazione di un Appalto nel formato ESPD-Request, per tutte le tipologie anche affidamento diretto per le pubblicazioni nazionali, nel formato eForm per le pubblicazioni europee in TED, più un formato definito da ANAC con le informazioni aggiuntive. SINCRONO 
      operationId: idAppaltoCrea
      requestBody:
        description: Inserimento Appalto con tutti i dati aggiuntivi
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreaAppaltoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Viene restituito l'idAppalto generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreaAppaltoResponse'
          links:
            VerificaAppaltoIdLink:  
              operationId: idAppaltoVerifica
              parameters:
                idAppalto: '$response.body#/idAppalto'
              description: >
                Il valore di `idAppalto` restituito nella riposta può essere usato per richiamare `GET /verifica-appalto`.
            ConfermaAppaltoIdLink:  
              operationId: idAppaltoConferma
              parameters:
                idAppalto: '$response.body#/idAppalto'
              description: >
                Il valore di `idAppalto` restituito nella riposta può essere usato per richiamare `GET /conferma-appalto`.
            StatoAppaltoIdLink:  
              operationId: idAppaltoStato
              parameters:
                idAppalto: '$response.body#/idAppalto'
              description: >
                Il valore di `idAppalto` restituito nella riposta può essere usato per richiamare `GET /stato-appalto`.    
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /modifica-appalto:
    post:
      tags:
         - comunicaAppalto
      summary: API Rest per la modifica dell'Appalto. SINCRONO 
      description: Il servizio permette la sostituzione della precedente istanza dell’Appalto con una nuova. L'Appalto è nel formato ESPD-Request, per tutte le tipologie anche affidamento diretto per le pubblicazioni nazionali, nel formato eForm per le pubblicazioni europee in TED, più un formato definito da ANAC con le informazioni aggiuntive. SINCRONO 
      operationId: idAppaltoModifica
      requestBody:
        description: Modifica dell'Appalto con tutti i dati aggiuntivi
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatiAppaltoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModificaAppaltoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'  
      security:
        - apiKeyAuth: []
  /cancella-appalto:
    post:
      tags:
        - comunicaAppalto
      summary: API Rest per l'eliminazione di un Appalto in lavorazione. SINCRONO
      description: Eliminazione logica di un Appalto e dei lotti in lavorazione. SINCRONO
      operationId: idAppaltoCancella
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idAppalto:
                  description: identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
                  type: string
                  format: uuid
                  example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
                motivo:  
                  description: descrizione del motivo della richiesta di cancellazione
                  type: string
                  maxLength: 200
                  example: 'Revoca delle procedure di gara'
              required:
                - idAppalto
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CancellaAppaltoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /ricerca-appalto:
    get:
      tags:
        -  comunicaAppalto
      summary: API Rest per la ricerca delle Gare-Lotto dell'Appalto. SINCRONO
      description: Viene recuperata la lista con i dati di sintesi dell'Appalto e dei rispettivi lotti. Le informazioni restituite dal servizio saranno filtrate, oltre in base ai parametri di ricerca, anche in base agli appalti di competenza dell' RP e della SA per la quale sta operando. SINCRONO
      operationId: idAppaltoRicerca
      parameters:
        - in: query
          name: codiceAppalto
          description: il codice dell'Appalto         
          schema:
            type: integer
            format: int32
        - in: query
          name: cig
          description: Identificativo univoco Appalto-Lotto rilasciato da ANAC
          schema:
            type: string
            example: 9050626CD6
        - in: query    
          name: lotIdentifier
          description: Id univoco del lotto generato dalla stazione appaltante - corrisponde al campo bt-137 - Purpose Lot Identifier del TED.
          schema:
            type: string
        - in: query
          name: stato
          description: Stato dell'Appalto - Se valorizzato, il parametro richiedere obbligatoriamente la valorizzazione di almeno un altro parametro - fare riferimento ai valori contenuti nel file [statoAppalto.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/statoAppalto.json)
          schema:
            $ref: '#/components/schemas/StatoAppaltoEnum'
        - in: query
          name: dataCreazioneDa
          description: Data di crezione dell'Appalto - intervallo successivo (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'
        - in: query
          name: dataCreazioneA
          description: Data di crezione dell'Appalto - intervallo precedente (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'  
        - in: query
          name: page
          description: numero della pagina da visualizzare
          schema:
            type: integer
            format: int32
            default: 1
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32
            default: 20
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppaltoListaResponse'          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /consulta-appalto:
    get:
      tags:
         - comunicaAppalto
      summary: API Rest per il recupero del dettaglio dell'Appalto. SINCRONO
      description: Servizio per la consultazione delle informazioni di dettaglio di un Appalto e dei relativi Lotti. SINCRONO
      operationId: idAppaltoDettaglio
      parameters:
        - in: query
          name: idAppalto
          description: Identificativo univoco dell'Appalto definito da ANAC alternativo al CIG. (A UUID specified by FC4122).
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        - in: query
          name: CIG
          description: Identificativo univoco Gara-Lotto rilasciato da ANAC, alternativo all'idAppalto
          schema:
            type: string
            example: 9050626CD6
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsultaAppaltoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'       
      security:
        - apiKeyAuth: []
  /verifica-appalto:
    post:
      tags:
        - comunicaAppalto
      summary: API Rest per la validazione dell'Appalto. ASINCRONO - ASIMMETRICO
      description: L'ultima istanza di appalto inviata viene validata. In base alla tipologia dell'appalto viene eseguita una validazione sintattica dei dati di input dell'appalto (eForm, ESPDRequest, anacForm). ASINCRONO - ASIMMETRICO 
      operationId: idAppaltoVerifica
      parameters:
        - in: query
          name: idAppalto
          description: identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
            $ref: '#/components/responses/200AckResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'          
      security:
        - apiKeyAuth: []
  /conferma-appalto:
    post:
      tags:
        - comunicaAppalto
      summary: API Rest per la conferma dei dati di Appalto propedeutica alla generazione dei CIG. ASINCRONO - ASIMMETRICO
      description: Il servizio permette la conferma dei dati dell'Appalto inviati e avvia la fase di validazione e assegnazione dei CIG. ASINCRONO - ASIMMETRICO 
      operationId: idAppaltoConferma
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idAppalto:
                  description: identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
                  type: string
                  format: uuid
                  example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
              required:
                - idAppalto
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Se previsto viene restituito l'idAvviso generato da ANAC.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfermaAppaltoResponse'
          links:
            StatoAvvisoIdLink:  
              operationId: idAvvisoStato
              parameters:
                idAvviso: '$response.body#/idAvviso'
              description: >
                Il valore di `idAvviso` restituito nella riposta può essere usato per richiamare `GET /stato-avviso`.
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'   
      security:
        - apiKeyAuth: []
  /stato-appalto:
    get:
      tags:
         - serviziComuni
      summary: API Rest per il recupero dello stato dell'Appalto. SINCRONO
      description: Servizio per il recupero dello stato in cui si trova l’Appalto. SINCRONO
      operationId: idAppaltoStato
      parameters:
        - in: query
          name: idAppalto
          description: Identificativo univoco dell'Appalto definito da ANAC
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatoAppaltoResponse'  
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /recupera-cig:
    get:
      tags:
        - comunicaAppalto
        - pubblicaAvviso
      summary: API Rest per il recupero dei CIG generati da ANAC e assegnati ai lotti dell’Appalto. SINCRONO
      description: Per un Appalto il servizio restituiti le coppie Lotto - CIG. SINCRONO
      operationId: idCIGRecupera
      parameters:
        - in: query
          name: idAppalto
          description: Identificativo univoco dell'Appalto definito da ANAC
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        - in: query
          name: page
          description: numero della pagina da visualizzare
          schema:
            type: integer
            format: int32
            default: 1
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32 
            default: 20
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CigListaResponse' 
            application/xml:
              schema:
                description: Risposta generica servizio
                type: object
                additionalProperties: false
                properties:
                  code:
                    description: codice di ritorno dell'operazione 
                    type: integer
                    format: int32
                    example: 200
                  type:
                    description: descrizione dell'esito dell'operazione eseguita
                    type: string
                    example: operazione terminata con successo
                  message:
                    description: messaggio di errore in caso di operazione non venga eseguita correttamente  
                    type: string
                xml:
                  name: '##default'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /pubblica-avviso:
    post:
      tags:
        - pubblicaAvviso
      summary: API Rest per la richiesta di pubblicazione di un'avviso sia a livello nazionale sia europeo. ASINCRONO - ASIMMETRICO
      description: Il servizio avvia la richiesta di pubblicazione di un Avviso, a livello nazionale e/o europeo. A seguito della chiamata a questo servizio, l’avviso transita in stato “IN ATTESA PUBBLICAZIONE”. ASINCRONO - ASIMMETRICO  
      operationId: idAvvisoPubblica
      parameters:
        - in: query
          name: idAvviso
          description: identificativo univoco dell'Avviso definito da ANAC. (A UUID specified by RFC4122)
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
            $ref: '#/components/responses/200AckResponse'        
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /modifica-avviso:
    post:
      tags:
        - pubblicaAvviso
      summary: API Rest per la creazione di un avviso che sostituisce il precedente non ancora pubblicato sia a livello nazionale e sia europeo. ASINCRONO - ASIMMETRICO
      description: API Rest per la richiesta di pubblicazione di un'avviso sia a livello nazionale sia europeo. L'avviso sostituisce il precedente non ancora pubblicato. Il servizio gestisce la pubblicazione europea mediante l'acquisizione di dati nel formato definito da TED (eForm) e, la pubblicazione nazionale mediante l'acquisizione di dati definiti dall'ESPD Request più dati aggiuntivi richiesti da ANAC. ASINCRONO ASIMMETRICO
      operationId: idAvvisoModifica
      requestBody:
        description: Inserimento Avviso con gli oggetti specifici per la pubblicazione in TED o in ambito Nazionale
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AvvisoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Viene restituito l'idAvviso generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModificaAvvisoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /rettifica-avviso:
    post:
      tags:
        - pubblicaAvviso
      summary: API Rest per la creazione di un avviso che rettifica il precedente pubblicato sia a livello nazionale e sia europeo. ASINCRONO - ASIMMETRICO
      description: API Rest per la richiesta di pubblicazione di un'avviso di rettifica sia a livello nazionale sia europeo. L'avviso rettifica il precedente già pubblicato. Il servizio gestisce la pubblicazione europea mediante l'acquisizione di dati nel formato definito da TED (eForm) e, la pubblicazione nazionale mediante l'acquisizione di dati definiti dall'ESPD Request più dati aggiuntivi richiesti da ANAC. ASINCRONO ASIMMETRICO
      operationId: idAvvisoRettifica
      requestBody:
        description: Inserimento Avviso con gli oggetti specifici per la pubblicazione in TED o in ambito Nazionale
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AvvisoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Viene restituito l'idAvviso generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RettificaAvvisoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /cancella-avviso:
    post:
      tags:
        - pubblicaAvviso
      summary: API Rest per la richiesta di annullamento di pubblicazione di un avviso non ancora pubblicato. ASINCRONO - ASIMMETRICO
      description: Il servizio permette di sospensione una una richiesta di pubblicazione, sia nazionale sia europea, di un avviso non ancora pubblicato. ASINCRONO ASIMMETRICO
      operationId: idAvvisoCancella
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idAvviso:
                  description: identificativo univoco dell'Avviso definito da ANAC. (A UUID specified by RFC4122)
                  type: string
                  format: uuid
                  example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
                motivo:  
                  description: descrizione del motivo della richiesta di cancellazione
                  type: string
                  maxLength: 200
                  example: 'Revoca delle procedure di gara'
              required:
                - idAvviso
        required: true
      responses:
        '200':
            $ref: '#/components/responses/200AckResponse'          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /ricerca-avviso:
    get: 
      tags:
        - pubblicaAvviso
      summary: API Rest per la ricerca degli avvisi dell'appalto. SINCRONO
      description: Viene recuperata la lista con i dati di sintesi degli Avvisi. Le informazioni restituite dal servizio saranno filtrate, oltre in base ai parametri di ricerca, anche in base agli appalti di competenza dell' RP e della SA per la quale sta operando. SINCRONO
      operationId: idAvvisoRicerca
      parameters:
        - in: query
          name: codiceAppalto
          description: il codice dell'Appalto         
          schema:
            type: integer
            format: int32
        - in: query    
          name: idAppalto
          description: Identificativo univoco dell' Appalto definito da ANAC. (A UUID specified by FC4122).
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"  
        - in: query
          name: CIG
          description: Identificativo univoco Gara-Lotto rilasciato da ANAC
          schema:
            type: string
            example: 9050626CD6
        - in: query
          name: stato
          description: stato dell'Appalto - fare riferimento ai valori contenuti nel file [statoAppalto.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/statoAppalto.json)
          schema:
            $ref: '#/components/schemas/StatoAppaltoEnum'
        - in: query
          name: dataCreazioneDa
          description: Data di crezione dell'Appalto - intervallo successivo (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'
        - in: query
          name: dataCreazioneA
          description: Data di crezione della Appalto - intervallo precedente (A datetime specified by RF333)
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'
        - in: query
          name: statoAvviso
          description: Stato in cui si trova l' Avviso - fare riferimento ai valori contenuti nel file [statoAvviso.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/statoAvviso.json)
          schema:
            $ref: '#/components/schemas/StatoAvvisoEnum'
        - in: query
          name: tipoAvviso
          description: Tipologia di avviso - fare riferimento ai valori contenuti nel file [tipoAvviso.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/tipoAvviso.json)
          schema:
            $ref: '#/components/schemas/TipoAvvisoEnum'
        - in: query
          name: azioneAvviso
          description: Tipo di azione dell'avviso - fare riferimento ai valori contenuti nel file [tipoAzioneAvviso.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/tipoAzioneAvviso.json)
          schema:
            $ref: '#/components/schemas/TipoAzioneAvvisoEnum'
        - in: query
          name: dataCreazioneAvvisoDa
          description: Data di crezione dell'Avviso - intervallo successivo (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'
        - in: query
          name: dataCreazioneAvvisoA
          description: Data di crezione della Avviso - intervallo precedente (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'    
        - in: query
          name: page
          description: numero della pagina da visualizzare
          schema:
            type: integer
            format: int32
            default: 1
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32
            default: 20
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AvvisoListaResponse'  
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /consulta-avviso:
    get:
      tags:
        - pubblicaAvviso
      summary: API Rest per il recupero del dettaglio di un Avviso. SINCRONO
      description: Viene resituita la definizione di un Avviso con tutte le sue informazioni di dettaglio.
      operationId: idAvvisoDettaglio
      parameters:
        - in: query
          name: idAvviso
          description: Identificativo dell'Avviso generato da ANAC.
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsultaAvvisoResponse'   
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /consulta-rendering-avviso:
    get:
      tags:
        - pubblicaAvviso
      summary: API Rest per il recupero del PDF di un Avviso. SINCRONO
      description: Viene resituito il file in foramto PDF relativo all' Avviso.
      operationId: idAvvisoAnteprima
      parameters:
        - in: query
          name: idAvviso
          description: Identificativo dell'Avviso generato da ANAC.
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RenderingAvvisoResponse'   
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /stato-avviso:
    get:
      tags:
         - pubblicaAvviso
      summary: API Rest per il recupero dello stato dell'Avviso. SINCRONO
      description: Servizio per il recupero dello stato in cui si trova l’Avviso. SINCRONO
      operationId: idAvvisoStato
      parameters:
        - in: query
          name: idAvviso
          description: Identificativo dell'Avviso generato da ANAC.
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatoAvvisoResponse'  
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /crea-scheda:
    post:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest generica per l'inserimento di una scheda dati per le fasi successive alla pubblicazione. SINCRONO
      description: API Rest generica per l'inserimento delle schede dati delle fasi successive alla pubblicazione. A titolo esemplificativo si riportano di seguito alcuni eventi che determinano l'obbligo di invio dati alla NPA:Elenco Partecipanti, Aggiudicazione, Avvio Contratto, Avanzamento Contratto, Conclusione Contratto, Collaudo Contratto, Sospensione, Ripresa Esecuzione, Contratto, Risoluzione Contratto, Modifica Contratto, Subappalto, Recesso, Contenzioso, Accordo Quadro. SINCRONO
      operationId: idSchedaCrea
      requestBody:
        description: Oggetto in ingresso al servizio
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreaSchedaRequest'
        required: true
      responses:
        '200':
            description: Operazione terminato con successo
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/CreaSchedaResponse'  
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /modifica-scheda:
    post:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest generica per la modifica di una scheda dati per le fasi successive alla pubblicazione. SINCRONO
      description: Il servizio sostituisce la precedentemente Scheda inviata. SINCRONO
      operationId: idSchedaModifica
      requestBody:
        description: Oggetto in ingresso al servizio
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatiSchedaRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModificaSchedaResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'  
      security:
        - apiKeyAuth: []
  /cancella-scheda:
    post:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest per l'eliminazione di una specifica Scheda dati in lavorazione nelle fasi successive alla pubblicazione. SINCRONO
      description: Eliminazione della Scheda dati in lavorazione. SINCRONO
      operationId: idSchedaCancella
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idScheda:
                  description: identificativo univoco della scheda definita da ANAC. (A UUID specified by RFC4122).
                  type: string
                  format: uuid
                  example: "68aa8c04-0d00-40f6-8d81-b59de3a3dcce"  
                motivo:  
                  description: descrizione del motivo della richiesta di cancellazione
                  type: string
                  maxLength: 200
                  example: 'Errore inserimento dati'
              required:
                - idScheda
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CancellaSchedaResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /ricerca-scheda:
    get:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest per la ricerca delle Schede dati inserite nelle fasi successive alla pubblicazione. SINCRONO
      description: Viene recuperata la lista con i dati di sintesi delle schede.Le informazioni restituite dal servizio saranno filtrate, oltre in base ai parametri di ricerca, anche in base agli appalti di competenza dell' RP e della SA per la quale sta operando. SINCRONO
      operationId: idSchedaRicerca
      parameters:
        - in: query    
          name: idAppalto
          description: Identificativo univoco della gara definito da ANAC. (A UUID specified by FC4122).
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"  
        - in: query
          name: CIG
          description: Identificativo univoco Gara-Lotto rilasciato da ANAC
          schema:
            type: string
            example: 9050626CD6
        - in: query
          name: stato
          description: stato dell'Appalto - fare riferimento ai valori contenuti nel file [statoAppalto.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/statoAppalto.json)
          schema:
            $ref: '#/components/schemas/StatoAppaltoEnum'
        - in: query
          name: dataCreazioneDa
          description: Data di crezione dell'Appalto - intervallo successivo (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'
        - in: query
          name: dataCreazioneA
          description: Data di crezione della Gara - intervallo precedente (A datetime specified by ISO 8601 as profiled by RFC 3339) 
          schema:
            type: string
            format: datetime
          example: '2022-01-23T12:02:05Z'
        - in: query
          name: tipoScheda
          description: Tipologia di Scheda - fare riferimento ai valori contenuti nel file [tipoScheda.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/tipoScheda.json)
          schema:
            $ref: '#/components/schemas/TipoSchedaEnum'
        - in: query
          name: statoScheda
          description: Stato della Scheda - fare riferimento ai valori contenuti nel file [statoScheda.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/statoScheda.json)
          schema:
            $ref: '#/components/schemas/StatoSchedaEnum'
        - in: query
          name: page
          description: numero della pagina da visualizzare
          schema:
            type: integer
            format: int32
            default: 1
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32
            default: 20
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SchedaListaResponse'          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /consulta-scheda:
    get:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest per il recupero del dettaglio di una specifica Scheda dati. SINCRONO
      description: Viene recuperato il dettaglio della specifica scheda dati. SINCRONO
      operationId: idSchedaDettaglio
      parameters:
        - in: query
          name: idScheda
          description: Identificativo della singola scheda restituita da ANAC nella fase di inserimento
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsultaSchedaResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /verifica-scheda:
    post:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest per la validazione di una Scheda dati. ASINCRONO - ASIMMETRICO
      description: L'ultimo istanza della Scheda inviata viene validata. La validazione è orchestrata da un Workflow Engine che, tramite il suo motore di regole, verifica sia se la scheda dati è coerente con lo stato dell’Appalto sia la correttezza sintattica dei dati di input.  ASINCRONO - ASIMMETRICO
      operationId: idSchedaVerifica
      parameters:
        - in: query
          name: idScheda
          description: identificativo univoco della Scheda definito da ANAC. (A UUID specified by RFC4122)
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      responses:
        '200':
            $ref: '#/components/responses/200AckResponse'       
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /conferma-scheda:
    post:
      tags:
        - comunicaPostPubblicazione
      summary: API Rest per la conferma dei dati inviati per una specifica Scheda. ASINCRONO - ASIMMETRICO
      description: Il servizio consente di confermare i dati inviati per una specifica Scheda e, qualora il tipo di scheda lo consente, avvia la fase di pubblicazione dell'avviso e restituisce l'identificativo ad esso assegnato. ASINCRONO - ASIMMETRICO 
      operationId: idSchedaConferma
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                idScheda:
                  description: identificativo univoco della scheda definita da ANAC. (A UUID specified by RFC4122).
                  type: string
                  format: uuid
                  example: "68aa8c04-0d00-40f6-8d81-b59de3a3dcce" 
              required:
                - idScheda
        required: true
      responses:
        '200':
          description: Operazione terminato con successo. Se previsto Viene restituito l'idAvviso generato da ANAC
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfermaSchedaResponse'
          links:
            StatoAvvisoIdLink:  
              operationId: idAvvisoStato
              parameters:
                idAvviso: '$response.body#/idAvviso'
              description: >
                Il valore di `idAvviso` restituito nella riposta può essere usato per richiamare `GET /stato-avviso`.  
            PubblicaAvvisoIdLink:  
              operationId: idAvvisoPubblica
              parameters:
                idAvviso: '$response.body#/idAvviso'
              description: >
                Il valore di `idAvviso` restituito nella riposta può essere usato per richiamare `GET /pubblica-avviso`.          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
            $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /esito-operazione:
    get:
      tags:
        - serviziComuni
      summary: API Rest per il recupero dell'esito dell'operazione. SINCRONO
      description: In base all'operazione viene restituita l'esito. SINCRONO
      operationId: idOperazioneEsito
      parameters:
        - in: query
          name: idAppalto
          description: identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
          required: true
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        - in: query
          name: tipoOperazione
          description: Tipo operazione di cui si vuole conoscere l'esito - fare riferimento ai valori contenuti nel file [tipoOperazione.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/tipoOperazione.json)
          required: true
          schema:
            $ref: '#/components/schemas/TipoOperazioneEnum'
        - in: query
          name: tipoRicerca
          description: Tipo di ricerca da eseguire - fare riferimento ai valori contenuti nel file [tipoRicercaOperazione.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/tipoRicercaOperazione.json)
          required: true
          schema:
            $ref: '#/components/schemas/TipoRicercaOperazioneEnum'
      responses:
        '200':
          description: Esecuzione avvenuta con successo
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EsitoOperazioneListaResponse'
        '404':
            description: Identificativo non trovato
            headers: *ratelimit_headers
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse'
        '400':
            description: Richiesta malformata
            headers: *ratelimit_headers
            content:
             application/problem+json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse'
        '429':
            description: Limite di richieste raggiunto
            headers:
              Retry-After:
                $ref: '#/components/headers/Retry-After'
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse'
        '500':
            description: Errore interno avvenuto
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse'
      security:
        - apiKeyAuth: []
  /recupera-elenco-tipologiche:
    get:
      tags:
        - serviziComuni
      summary: API Rest per il recupero dell'elenco delle tipologiche disponibili. SINCRONO
      description: Il servizio restituiti un'elenco delle tipologiche disponibili. SINCRONO
      operationId: idRecuperaElencoTipologiche
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TipologicaListaResponse' 
            application/xml:
              schema:
                description: Risposta generica servizio
                type: object
                additionalProperties: false
                properties:
                  code:
                    description: codice di ritorno dell'operazione 
                    type: integer
                    format: int32
                    example: 200
                  type:
                    description: descrizione dell'esito dell'operazione eseguita
                    type: string
                    example: operazione terminata con successo
                  message:
                    description: messaggio di errore in caso di operazione non venga eseguita correttamente  
                    type: string
                xml:
                  name: '##default'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: [] 
  /recupera-tipologica:
    get:
      tags:
        - serviziComuni
      summary: API Rest per il recupero di una specifica tipologica. SINCRONO
      description: Il servizio restituiti l'elenco di una singola tipologica. SINCRONO
      operationId: idRecuperaTipologica
      parameters:
        - in: query
          name: idTipologica
          description: Identificativo univoco della tipologica
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: dataInizio
          description: Data di inizio (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
            example: '2022-01-23T12:02:05Z'
        - in: query
          name: dataFine
          description: Data di fine (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
            example: '2022-01-23T12:02:05Z'
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TipologicaResponse' 
            application/xml:
              schema:
                description: Risposta generica servizio
                type: object
                additionalProperties: false
                properties:
                  code:
                    description: codice di ritorno dell'operazione 
                    type: integer
                    format: int32
                    example: 200
                  type:
                    description: descrizione dell'esito dell'operazione eseguita
                    type: string
                    example: operazione terminata con successo
                  message:
                    description: messaggio di errore in caso di operazione non venga eseguita correttamente  
                    type: string
                xml:
                  name: '##default'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /recupera-valore-tipologica:
    get:
      tags:
        - serviziComuni
      summary: API Rest per il recupero di un singolo item di una tipologica. SINCRONO
      description: Il servizio restituiti il valore di un singolo item che si vuole recuperare dalla tipologica. SINCRONO
      operationId: idRecuperaItemTipologica
      parameters:
        - in: query
          name: idTipologica
          description: Identificativo univoco della tipologica
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: codice
          description: Codice del valore che si vuole recuperare dalla tipologica
          schema:
            type: string
          required: true          
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TipologicaItemResponse' 
            application/xml:
              schema:
                description: Risposta generica servizio
                type: object
                additionalProperties: false
                properties:
                  code:
                    description: codice di ritorno dell'operazione 
                    type: integer
                    format: int32
                    example: 200
                  type:
                    description: descrizione dell'esito dell'operazione eseguita
                    type: string
                    example: operazione terminata con successo
                  message:
                    description: messaggio di errore in caso di operazione non venga eseguita correttamente  
                    type: string
                xml:
                  name: '##default'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []        
  /presa-carico:
    post:
      tags:
         - gestioneUtenti
      summary: API Rest per l’associazione di un Responsabile di Progetto. SINCRONO 
      description: servizio utile per l’associazione di un responsabile di progetto. SINCRONO 
      operationId: idPresaCarico
      parameters:
        - in: query
          name: idAppalto
          description: Identificativo dell'Appalto generato da ANAC. Alternativo al CIG
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        - in: query
          name: CIG
          description: Identificativo univoco Gara-Lotto generato da ANAC. Alternativo all'idAppalto
          schema:
            type: string
            example: "9050626CD6"    
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PresaCaricoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /ricerca-soggetti:
    get:
      tags:
        -  gestioneUtenti
      summary: API Rest per la ricerca dei soggetti incaricati.Le informazioni restituite dal servizio saranno filtrate, oltre in base ai parametri di ricerca, anche in base agli appalti di competenza dell' RP e della SA per la quale sta operando. SINCRONO
      description: viene recuperata la lista con i dati di sintesi dei soggetti incaricati. SINCRONO
      operationId: idIncaricatoRicerca
      parameters:
        - in: query    
          name: idAppalto
          description: Identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by FC4122).
          schema:
            type: string
            format: uuid
            example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"  
        - in: query
          name: CIG
          description: Identificativo univoco Gara-Lotto rilasciato da ANAC
          schema:
            type: string
            example: '9050626CD6'
        - in: query
          name: codice
          description: identificativo univoco del soggetto
          schema:
            type: string
            example: 'RSSMRA94E07A511G'
        - in: query
          name: ruolo
          description: Ruolo di un soggetto - fare riferimento ai valori contenuti nel file [tipoRuolo.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/tipoRuolo.json)
          schema:
            $ref: '#/components/schemas/TipoRuoloEnum' 
        - in: query
          name: servizio
          description: servizio delegato al soggetto - fare riferimento ai valori contenuti nel file [tipoFunzione.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/tipoScheda.json)
          schema:
            $ref: '#/components/schemas/TipoServizioSoggettoEnum'
        - in: query
          name: operazione
          description: operazione delegata al soggetto - fare riferimento ai valori contenuti nel file [tipoOperazioneSoggetto.json](https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/tipologiche/tipoOperazioneSoggetto.json)        
          schema:
            $ref: '#/components/schemas/TipoOperazioneSoggettoEnum'            
        - in: query
          name: dataInizioDa
          description: Data inizio incarico soggetto - intervallo successivo (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'
        - in: query
          name: dataInizioA
          description: Data inizio incarico soggetto - intervallo precedente (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'
        - in: query
          name: dataFineDa
          description: Data fine incarico soggetto - intervallo successivo (A datetime specified by ISO 8601 as profiled by RFC 3339)
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'
        - in: query
          name: dataFineA
          description: data fine incarico soggetto - intervallo precedente (A datetime specified by ISO 8601 as profiled by RFC 3339) 
          schema:
            type: string
            format: datetime
          example: '2015-05-28T14:07:17Z'
        - in: query
          name: page
          description: numero della pagina da visualizzare
          schema:
            type: integer
            format: int32
            default: 1
        - in: query  
          name: perPage
          description: numero di elementi per pagina
          schema:
            type: integer
            format: int32
            default: 20
      responses:
        '200':
          description: Operazione terminato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SoggettoListaResponse'          
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /aggiungi-soggetto:
    post:
      tags:
         - gestioneUtenti
      summary: API Rest per associare un soggetto delegato. SINCRONO 
      description: servizio che ha lo scopo aggiungere l’istanza di un soggetto delegato. SINCRONO 
      operationId: idSoggettoAggiungi
      requestBody:
        description: Oggetto generico in ingresso al servizio
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SoggettoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AggiungiSoggettoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
  /elimina-soggetto:
    post:
      tags:
         - gestioneUtenti
      summary: API Rest per eliminare da un ruolo un soggetto delegato. SINCRONO 
      description: servizio di cancellazione logica di un soggetto. SINCRONO 
      operationId: idSoggettoElimina
      requestBody:
        description: Oggetto generico in ingresso al servizio 
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SoggettoRequest'
        required: true
      responses:
        '200':
          description: Operazione terminato con successo.
          headers: *ratelimit_headers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EliminaSoggettoResponse'
        '400':
            $ref: '#/components/responses/400BadRequest'
        '404':
            $ref: '#/components/responses/404NotFound'
        '429':
            $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalServerError'
      security:
        - apiKeyAuth: []
components:
  headers:
    Retry-After:
      description: |-
        Retry contacting the endpoint *at least* after seconds.
        See https://tools.ietf.org/html/rfc7231#section-7.1.3
      schema:
        format: int32
        maximum: 186400
        minimum: 0
        type: integer
    Sunset:
      description: The Sunset HTTP response header field, indicates that a URI is likely
        to become unresponsive at a specified point in the future.  It also defines
        a sunset link relation type that allows linking to resources providing information
        about an upcoming resource or service sunset.
      schema:
        example: Sun, 06 Nov 1994 08:49:37 GMT
        externalDocs:
          url: https://tools.ietf.org/html/rfc7231#appendix-D
        format: HTTP-date
        maxLength: 30
        type: string
    X-RateLimit-Limit:
      description: The number of allowed requests in the current period
      schema:
        format: int32
        maximum: 1000000
        minimum: 0
        type: integer
    X-RateLimit-Remaining:
      description: The number of remaining requests in the current period
      schema:
        format: int32
        maximum: 1000000
        minimum: 0
        type: integer
    X-RateLimit-Reset:
      description: The number of seconds left in the current period
      schema:
        format: int32
        maximum: 186400
        minimum: 0
        type: integer  
    X-Ratelimit-Used: 
      description: The number of requests used in the current period
      schema:
        type: integer
        format: int32      
  responses:
    200AckResponse:
      description: Richiesta accettata
      headers: *ratelimit_headers
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AckResponse'
    400BadRequest:
      description: Richiesta malformattata
      headers: *ratelimit_headers
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    404NotFound:
      description: Dato non trovato
      headers: *ratelimit_headers
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    429TooManyRequests:
      description: Limite di richieste raggiunto
      headers:
        Retry-After:
            $ref: '#/components/headers/Retry-After'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    500InternalServerError:
      description: Errore generico. Operazione terminato con errore. Viene restitutito il dettaglio dell'errore
      headers: *ratelimit_headers
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    503ServiceUnavailable:
      description: Service Unavailable
      headers:
        Retry-After:
            $ref: '#/components/headers/Retry-After'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    default:
      description: |-
       Errore inatteso. Non ritornare informazioni
       sulla logica interna e/o non pertinenti all'interfaccia.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
  schemas:
    StatoAppaltoEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/StatoAppaltoEnum'
    StatoAvvisoEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/StatoAvvisoEnum'
    StatoPianoEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/StatoPianoEnum'
    TipoPianoEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/TipoPianoEnum'
    TipoAvvisoEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/TipoAvvisoEnum'
    TipoAzioneAvvisoEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/TipoAzioneAvvisoEnum'
    TipoSchedaEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/TipoSchedaEnum'
    StatoSchedaEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/StatoSchedaEnum'
    TipoOperazioneEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/TipoOperazioneEnum'
    TipoRicercaOperazioneEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/TipoRicercaOperazioneEnum'
    TipoServizioSoggettoEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/TipoServizioSoggettoEnum'
    TipoOperazioneSoggettoEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/TipoOperazioneSoggettoEnum'      
    TipoRuoloEnum:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/TipoRuoloEnum'
    AppaltoType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/AppaltoType'
    PianoType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/PianoType'
    AnagraficaSoggettoType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/AnagraficaSoggettoType'
    PaginazioneType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/PaginazioneType'
    AvvisoType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/AvvisoType'
    DatiAvvisoType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/DatiAvvisoType'
    CigType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/CigType'
    DatiAppaltoBaseType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/DatiAppaltoBaseType'    
    DatiAppaltoType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/DatiAppaltoType'
    DatiSchedaBaseType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/DatiSchedaBaseType'    
    DatiSchedaType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/DatiSchedaType'
    DatiPianoBaseType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/DatiPianoBaseType'      
    DatiPianoType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/DatiPianoType'
    ContentDocumentType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/ContentDocumentType'
    EsitoOperazioneType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/EsitoOperazioneType'
    TipologicaBaseType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/TipologicaBaseType'      
    TipologicaType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/TipologicaType'
    DatiTipologicaType:
      $ref: 'https://raw.githubusercontent.com/domaltomare/npa/main/docs/modello-dati/modello-dati-npa.yaml#/components/schemas/DatiTipologicaType'
    CreaAppaltoRequest:
      allOf: # estende la classe DatiAppaltoBaseType
        - $ref: '#/components/schemas/DatiAppaltoBaseType'
    DatiAppaltoRequest:
      allOf: # estende la classe DatiAppaltoType
        - $ref: '#/components/schemas/DatiAppaltoType'
    CreaPianoRequest:
      allOf: # estende la classe DatiPianoType
        - $ref: '#/components/schemas/DatiPianoBaseType'
    DatiPianoRequest:
      allOf: # estende la classe DatiPianoType
        - $ref: '#/components/schemas/DatiPianoType'
    ConsultaAppaltoResponse :
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      properties:  
        appalto:
          $ref: '#/components/schemas/DatiAppaltoType'
    CreaPianoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idPianificazione
      properties:
        idPianificazione:
          description: Identificativo univoco della pianificazione definito da ANAC. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    PresaCaricoResponse:
      description: Risposta generica servizio
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      example:
        detail: "Associazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
    AggiungiSoggettoResponse:
      description: Risposta generica servizio
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
    EliminaSoggettoResponse:
      description: Risposta generica servizio
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'    
    ModificaPianoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idPianificazione
      properties:
        idPianificazione:
          description: Identificativo univoco della pianificazione definito da ANAC. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"      
    CancellaPianoResponse:
      description: Risposta all'operazione Cancella Piano
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      example:
        detail: "Cancellazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"      
    CreaAppaltoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idAppalto
      properties:
        idAppalto:
          description: Identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      example:
        detail: "Creazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
        idAppalto: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    ModificaAppaltoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idAppalto
      properties:
        idAppalto:
          description: Identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6" 
      example:
        detail: "Sostituzione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
        idAppalto: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"    
    CancellaAppaltoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      example:
        detail: "Cancellazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
    StatoAppaltoResponse : 
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      properties:
        idAppalto:
          description: identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        stato:  
           $ref: '#/components/schemas/StatoAppaltoEnum'
    StatoAvvisoResponse: 
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      properties:
        stato:  
          $ref: '#/components/schemas/StatoAvvisoEnum' 
      example:
        status: 200
        title: "Operazione Effettuata" 
        stato: 'PUBBLICAZIONE FERMATA'
    AppaltoListaResponse :
      allOf: # estende la classe PaginazioneType
        - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result: 
          description: risposta di una lista di oggetti paginati specifica del servizio SINCRONO
          type: array
          items:
            $ref: '#/components/schemas/AppaltoType'
    SoggettoListaResponse :
      allOf: # estende la classe PaginazioneType
        - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result: 
          description: risposta di una lista di soggetti incaricati. SINCRONO
          type: array
          items:
            $ref: '#/components/schemas/AnagraficaSoggettoType'        
    PianoListaResponse:
      allOf: # estende il modello dati PaginazioneType
        - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result: 
          description: risposta di una lista di oggetti paginati specifica del servizio SINCRONO
          type: array
          items:
            $ref: '#/components/schemas/PianoType'
    AvvisoListaResponse:
      allOf: # estende la classe PaginazioneType
        - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result: 
          description: Lista di ritorno con la sintesi dei dati dell'Avviso
          type: array
          items:
            $ref: '#/components/schemas/DatiAvvisoType'  
    CigListaResponse :
      allOf: # estende la classe PaginazioneType
        - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result: 
          description: Lista lotIdentifier-cig
          type: array
          items:
            $ref: '#/components/schemas/CigType' 
    TipologicaResponse:
      type: object
      additionalProperties: false
      properties:
        tipologica:  
          $ref: '#/components/schemas/TipologicaType'   
    TipologicaItemResponse:
      type: object
      additionalProperties: false
      properties:
        tipologica:  
          $ref: '#/components/schemas/DatiTipologicaType'       
    TipologicaListaResponse:
      allOf: # estende la classe PaginazioneType
        - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result: 
          description: Elenco di tutte le tipologiche
          type: array
          items:
            $ref: '#/components/schemas/TipologicaBaseType' 
    SchedaListaResponse:
      allOf: # estende la classe PaginazioneType
          - $ref: '#/components/schemas/PaginazioneType'
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        result:
          description: Lista di ritorno con la sintesi dei dati delle schede
          type: array
          items:
            $ref: '#/components/schemas/DatiSchedaType'
    SoggettoRequest:
      description: Oggetto generico di ritorno di una risposta con paginazione
      type: object
      additionalProperties: false
      properties:
        codice:
          description: identificativo univoco del soggetto.
          type: string
          example: "AAA345FRT565"
        idAppalto:
          description: Identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        CIG:
          description: Identificativo univoco Gara-Lotto generato da ANAC. Alternativo all'idAppalto
          type: string
          example: "9050626CD6"
        ruolo:  
          $ref: '#/components/schemas/TipoRuoloEnum'
        servizio:  
          $ref: '#/components/schemas/TipoServizioSoggettoEnum'
        operazione:  
          $ref: '#/components/schemas/TipoOperazioneSoggettoEnum'          
        dataInizio: 
          description: Data di inizio (A datetime specified by ISO 8601 as profiled by RFC 3339)
          type: string
          format: datetime
          example: '2022-01-23T12:02:05Z'
        dataFine: 
          description: Data di fine (A datetime specified by ISO 8601 as profiled by RFC 3339)
          type: string
          format: datetime
          example: '2022-01-23T12:02:05Z'
    CreaSchedaRequest:
      allOf: # estende la classe DatiSchedaType
        - $ref: '#/components/schemas/DatiSchedaBaseType'
    DatiSchedaRequest:
      allOf: # estende la classe DatiSchedaType
        - $ref: '#/components/schemas/DatiSchedaType'
    AvvisoRequest:
      allOf: # estende la classe AvvisoType
        - $ref: '#/components/schemas/AvvisoType'
    ConsultaAvvisoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      properties:
        avviso:
          $ref: '#/components/schemas/DatiAvvisoType'
    RenderingAvvisoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      properties:  
        content:
          $ref: '#/components/schemas/ContentDocumentType'
      example:
        status: 200
        title: "Operazione Effettuata"
        content: 
          estensione: "PDF"
          size: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
          content: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    ConsultaPianoResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      properties:
        piano:
          $ref: '#/components/schemas/DatiPianoType'
    ConsultaSchedaResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      properties:
        scheda:
          $ref: '#/components/schemas/DatiSchedaType'
    EsitoOperazioneListaResponse:
      type: object
      additionalProperties: false
      required:  # List the required properties here
        - idAppalto
      properties:
        idAppalto:
          description: Identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
        listaEsiti:
          description: Lista di ritorno esiti operazione
          type: array
          items:
            $ref: '#/components/schemas/EsitoOperazioneType'
    BaseResponse:
      type: object
      additionalProperties: false
      properties:
          instance:
              description: |
                An absolute URI that identifies the specific occurrence of the
                problem.
                It may or may not yield further information if dereferenced.
              format: uri
              maxLength: 2048
              type: string
          status:
              description: |
                The HTTP status code generated by the origin server for this
                occurrence
                of the problem.
              exclusiveMaximum: true
              format: int32
              maximum: 600
              minimum: 100
              type: integer
              example: 400
          title:
              description: |
                A short, summary of the problem type. Written in english and
                readable
                for engineers (usually not suited for non technical stakeholders
                and not localized);
              maxLength: 64
              pattern: ^[ -~]{0,64}$
              type: string
              example: 'There was a validation error'
          detail:
              description: |
                A human readable explanation specific to this occurrence of the
                problem.
              maxLength: 4096
              pattern: ^.{0,1024}$
              type: string
              example: 'Object Validation Error'
          type:
              description: |
                An absolute URI that identifies the problem type. When
                dereferenced,
                it SHOULD provide human-readable documentation for the problem
                type
                (e.g., using HTML).
              default: about:blank
              format: uri
              maxLength: 2048
              type: string
              example: 'https://tools.ietf.org/html/rfc7231#section-6.6.4'
          errori:
            description: elenco degli errori
            type: object
            properties:
              codice:
                type: string
                example: '001'
              descrizione:
                maxLength: 4096
                pattern: ^.{0,1024}$
                type: string
                example: 'Non è stato indicato il campo Motivazione richiesta CIG.'
    ErrorResponse:
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
    AckResponse:
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      example:
        status: 200
        title: "Richiesta acquisita"
    ConfermaAppaltoResponse:
      description: Risposta all'operazione Conferma Appalto
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      example:
        status: 200
        title: "Operazione Effettuata"
    CreaSchedaResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idScheda
      properties:
        idScheda:
          description: Identificativo univoco della Scheda definito da ANAC. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
      example:
        detail: "Creazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
        idScheda: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    ModificaSchedaResponse:
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      description: Risposta generica servizio
      type: object
      required:
        - idScheda
      properties:
        idScheda:
          description: Identificativo univoco dell'Appalto definito da ANAC. (A UUID specified by RFC4122)
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6" 
      example:
        detail: "Sostituzione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"
        idScheda: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"    
    ConfermaSchedaResponse:
      description: Risposta all'operazione Conferma Scheda
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      example:
        status: 200
        title: "Operazione Effettuata"
    ConfermaPianoResponse:
      description: Risposta all'operazione Conferma Piano
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      example:
        status: 200
        title: "Operazione Effettuata" 
    CancellaSchedaResponse:
      description: Risposta all'operazione Cancella Scheda
      allOf: # estende lo schema dati di BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      example:
        detail: "Cancellazione eseguita con successo"
        status: 200
        title: "Operazione Effettuata"  
    ModificaAvvisoResponse:
      description: Risposta all'operazione Modifica Avviso
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      required:  # List the required properties here
        - idAvviso
      properties:
        idAvviso:
          description: identificativo univoco dell'Avviso definito da ANAC. (A UUID specified by RFC4122)
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"
    RettificaAvvisoResponse:
      description: Risposta all'operazione Rettifica Avviso
      allOf: # estende la classe BaseResponse
        - $ref: '#/components/schemas/BaseResponse'
      type: object
      additionalProperties: false
      required:  # List the required properties here
        - idAvviso
      properties:
        idAvviso:
          description: identificativo univoco dell'Avviso definito da ANAC. (A UUID specified by RFC4122)
          type: string
          format: uuid
          example: "f81d4fae-7dec-11d0-a765-00a0c91e6bf6"          
  securitySchemes:
    apiKeyAuth:
      type: apiKey
      name: apiKeyAuth # name of the header, query parameter or cookie
      in: header  # can be "header", "query" or "cookie"
